# AGENTS.md — uzr 저장소용 에이전트 안내서

본 문서는 이 저장소(루트 이하 전체 트리)에서 에이전트(Codex CLI)가 작업할 때 따라야 할 규칙과 힌트를 제공합니다. 상위(시스템/개발자/사용자) 지시가 있을 경우 그 지시가 항상 우선합니다. 더 깊은 경로에 별도의 AGENTS.md가 생기면 그 지시가 우선합니다.

## 기본 원칙
- 요구사항에만 정확히 대응하고 변경 범위를 최소화합니다(수술적 수정).
- 관련 없는 리팩터링/리네이밍/대규모 정리 작업은 금지합니다(요청 시에만).
- 문제의 근본 원인을 해결하되, 불필요한 복잡성을 더하지 않습니다.
- 문서(이 파일, README 등)는 필요한 최소한으로 업데이트합니다.
- 테스트/실행이 가능하면, 변경 범위에 국한해 검증합니다.
- 네트워크·시스템 권한이 필요한 작업은 사용자 승인 없이 시도하지 않습니다.

## 코드 스타일(파이썬)
- PEP 8을 기본으로 합니다. 새로운 코드에 타입 힌트를 권장합니다.
- 공개 함수/클래스에는 간단한 docstring을 추가합니다(과도하게 장황하지 않게).
- 변수명/함수명은 `snake_case`를 사용합니다(새 파일/코드에 한함).
- 불필요한 외부 의존성 추가 금지. 표준 라이브러리를 우선 사용합니다.
- 로깅/프린트는 기존 패턴을 따릅니다. 전역 포맷터/린터 도입 금지(요청 시에만).

## 파일/폴더 가이드
- 새 파이썬 파일은 `snake_case.py`로 생성합니다.
- 기존 파일/이름은 유지합니다(합의 없는 리네이밍 금지).
- 큰 변경 전, 작은 단계로 분할하고 각 단계를 명확히 설명합니다.

## 작업 흐름(에이전트)
- 변경 전: 관련 파일을 빠르게 탐색하고, 계획을 간단히 공유합니다.
- 변경 시: 필요한 최소 파일만 수정/추가합니다.
- 변경 후: 요약(무엇을, 왜, 어디서)과 다음 단계 제안.

## 실행/검증 힌트
- 파이썬 스크립트 실행 예: `python <파일명>.py`
- 장시간 또는 대용량 작업은 사전 고지 및 승인 후 진행합니다.

## Codex 장기 기억 파일
- 위치: 저장소 루트 `codex.memory.json`
- 목적: 이 저장소에서 에이전트가 재사용할 장기 정보(사용자 선호, 반복 명령, 결정 기록)를 보존합니다.
- 작성 원칙:
  - 사실/선호/명령처럼 재사용 가치가 높은 정보만 기록합니다.
  - 민감정보(비밀번호, 토큰, 개인식별정보)는 절대 저장하지 않습니다.
  - 스키마를 준수하며, 불명확한 추측성 항목은 넣지 않습니다.
- 권장 스키마(요약):
```json
{
  "version": 1,
  "format": "codex-cli.memory",
  "user": {
    "preferred_language": "ko"
  },
  "project": {
    "name": "uzr",
    "paths": { "root": "." }
  },
  "facts": [],
  "commands": {},
  "todos": []
}
```
- 업데이트 트리거 예시:
  - 사용자 선호 변경(언어, 출력 형태, 스타일 등)
  - 반복적으로 사용하는 실행/검증 명령이 확정될 때
  - 설계 상의 중대한 결정/제약이 합의되었을 때(간단 요약)

## 작업 종료 시 기록(필수)
- 모든 작업 종료 시 다음 두 가지를 반드시 수행합니다.
  1) `CHANGELOG.md`에 변경 요약을 추가합니다(파일/라인 범위, 핵심 의도, 호환성 영향).
  2) `codex.memory.json`의 `facts`에 정책/선호/중요 결정을 반영합니다(민감정보 제외).
- 장기 실행/추가 구현이 남은 경우 `todos`에 간단히 남깁니다.

## 금지사항
- 네트워크 호출/패키지 설치/파괴적 파일 작업은 사용자 승인 없이 금지.
- 테스트·실행 시간을 과도하게 증가시키는 전면적 변경 금지.
- 저장된 기억을 근거 없이 변형/삭제 금지(명시적 요청 시에만).

## 우선순위 요약
1) 시스템/개발자/사용자 지시
2) 이 AGENTS.md
3) 기존 코드베이스의 관례

필요 시 이 문서를 갱신하되, 변경 이유와 영향을 간단히 기록하세요.
